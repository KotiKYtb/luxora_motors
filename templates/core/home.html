{% extends "base.html" %}
{% load static %}

{% block title %}Accueil{% endblock %}

{% block content %}
  <section class="hero">
    <div class="hero-video-wrap" aria-hidden="true">
      <video class="hero-video" autoplay muted loop playsinline>
        <source src="{% static 'videos/WM.mp4' %}" type="video/mp4">
      </video>
    </div>
    <div class="hero-video-overlay" aria-hidden="true"></div>
    <div class="hero-bg"></div>
    <div class="hero-bg-animated" aria-hidden="true"></div>
    <div class="hero-bg-glow" aria-hidden="true"></div>
    <div class="hero-content">
      <h1 class="hero-title hero-title-single">
        <span class="hero-line1">Spécialiste dans la vente de voitures d'exception</span>
      </h1>
      <div class="hero-cta hero-cta-initial">
        <a href="{% url 'vehicule_list' %}" class="btn btn-primary btn-shine">Voir notre collection</a>
      </div>
    </div>
    <noscript>
      <style>.hero-line1,.hero-cta-initial{opacity:1!important;transform:none!important}</style>
    </noscript>
    <div class="hero-scroll" aria-hidden="true">
      <span class="hero-scroll-line"></span>
      <span>Découvrir</span>
    </div>
  </section>

  <section class="section-services" id="nos-services">
    <div class="section-services-inner">
      <header class="section-services-header">
        <span class="section-services-accent" aria-hidden="true"></span>
        <h2 class="section-services-title"><span class="section-title-wrap gsap-reveal">Nos services</span></h2>
      </header>
      <div class="services-list">
        <article class="service-item card-reveal">
          <span class="service-item-icon" aria-hidden="true">
            <img src="https://img.icons8.com/?size=56&id=47610&format=png&color=BFC3C9" alt="" width="28" height="28" class="service-item-icon-img">
          </span>
          <div class="service-item-content">
            <h3 class="service-item-title">Mise en relation sécurisée</h3>
            <p class="service-item-desc">Acheteurs & vendeurs fiables.</p>
          </div>
        </article>
        <span class="service-sep" aria-hidden="true"></span>
        <article class="service-item card-reveal">
          <span class="service-item-icon" aria-hidden="true">
            <svg width="28" height="28" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.8" stroke-linecap="round" stroke-linejoin="round"><path d="M14 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V8z"/><polyline points="14 2 14 8 20 8"/><line x1="16" y1="13" x2="8" y2="13"/><line x1="16" y1="17" x2="8" y2="17"/><polyline points="10 9 9 9 8 9"/></svg>
          </span>
          <div class="service-item-content">
            <h3 class="service-item-title">Gestion administrative complète</h3>
            <p class="service-item-desc">Démarches simplifiées, transaction fluide.</p>
          </div>
        </article>
        <span class="service-sep" aria-hidden="true"></span>
        <article class="service-item card-reveal">
          <span class="service-item-icon" aria-hidden="true">
            <svg width="28" height="28" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.8" stroke-linecap="round" stroke-linejoin="round"><rect x="3" y="11" width="18" height="11" rx="2" ry="2"/><path d="M7 11V7a5 5 0 0 1 10 0v4"/></svg>
          </span>
          <div class="service-item-content">
            <h3 class="service-item-title">Confidentialité absolue</h3>
            <p class="service-item-desc">Discrétion garantie à chaque étape.</p>
          </div>
        </article>
      </div>
    </div>
  </section>

  <section class="section" id="vedettes">
    <div class="section-header">
      <h2 class="section-title"><span class="section-title-wrap gsap-reveal">Les dernières nouveautés</span></h2>
    </div>
    <div class="vehicules-grid">
      {% for v in vedettes %}
        <article class="vehicule-card card-reveal">
          <a href="{% url 'vehicule_detail' v.pk %}" class="vehicule-card-link">
            <div class="card-image-wrap">
              {% if v.image_principale %}
                <img src="{{ v.image_principale.url }}" alt="{{ v.titre }}" loading="lazy">
              {% elif v.image_url %}
                <img src="{{ v.image_url }}" alt="{{ v.titre }}" loading="lazy">
              {% else %}
                <img src="https://placehold.co/600x375/2B2F34/BFC3C9?text={{ v.modele|urlencode }}" alt="{{ v.titre }}" loading="lazy">
              {% endif %}
              <span class="card-badge">{{ v.get_marque_display }}</span>
              <div class="card-specs-overlay">
                <div class="card-specs-overlay-inner">
                  <p class="card-specs-line-overlay">{{ v.annee }} · {{ v.kilometrage|floatformat:0 }} km{% if v.puissance_ch %} · {{ v.puissance_ch }} ch{% endif %}</p>
                  <p class="card-specs-price-overlay">{{ v.prix|floatformat:0 }} €</p>
                  <span class="card-specs-cta">Découvrir</span>
                </div>
              </div>
            </div>
            <div class="card-body">
              <h3 class="card-title">{{ v.titre }}</h3>
              <p class="card-marque">{{ v.get_marque_display }}</p>
              <p class="card-specs-line">{{ v.annee }} · {{ v.kilometrage|floatformat:0 }} km · <strong>{{ v.prix|floatformat:0 }} €</strong></p>
              {% if v.options.exists %}
                <ul class="card-options-list">
                  {% for opt in v.options.all %}
                    <li>{{ opt.libelle }}</li>
                  {% endfor %}
                </ul>
              {% endif %}
              <span class="card-cta">Découvrir</span>
            </div>
          </a>
        </article>
      {% empty %}
        <p class="text-center" style="grid-column: 1/-1; color: var(--text-muted);">
          Aucun véhicule en vedette pour le moment. <a href="{% url 'vehicule_list' %}">Voir tous les véhicules</a>.
        </p>
      {% endfor %}
    </div>
    {% if vedettes %}
      <p class="text-center mt-2">
        <a href="{% url 'vehicule_list' %}" class="btn btn-outline btn-shine">Voir tous nos véhicules</a>
      </p>
    {% endif %}
  </section>
{% endblock %}
